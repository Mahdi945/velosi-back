# ============================================
# CONFIGURATION PRODUCTION COMPLÈTE
# ============================================
# Ce fichier contient TOUTES les variables nécessaires pour la production
# ⚠️ NE JAMAIS COMMITTER CE FICHIER SUR GIT !

# ============================================
# BASE DE DONNÉES SUPABASE (PRODUCTION)
# ============================================
DB_VENDOR=postgres
DB_ADDR=aws-1-eu-north-1.pooler.supabase.com
DB_PORT=5432
DB_USER=postgres.aswqsbrpkofmhgqjmyuw
DB_PASSWORD=87Eq8384
DB_DATABASE=postgres

# ============================================
# JWT CONFIGURATION
# ============================================
JWT_SECRET=velosi-secret-key-2025-ultra-secure
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# KEYCLOAK - CONFIGURATION TEMPORAIRE
# ============================================
# ⚠️ Pour le moment, on va déployer SANS authentification Keycloak
# Le backend fonctionnera avec JWT simple
# On ajoutera Keycloak plus tard quand on aura une solution stable

# Variables Keycloak (désactivées pour le moment)
# KEYCLOAK_URL=http://localhost:8080
# KEYCLOAK_SERVER_URL=http://localhost:8080
# KEYCLOAK_AUTH_SERVER_URL=http://localhost:8080
# KEYCLOAK_REALM=ERP_Velosi
# KEYCLOAK_CLIENT_ID=velosi_auth
# KEYCLOAK_CLIENT_SECRET=SqW52BNjvjyvmaJyUx2TwzgFTeqzeBzF
# KEYCLOAK_ADMIN_USERNAME=admin
# KEYCLOAK_ADMIN_PASSWORD=87Eq8384

# ============================================
# ENVIRONMENT
# ============================================
NODE_ENV=production
PORT=3000

# ============================================
# FRONTEND (VERCEL)
# ============================================
# URL de production Vercel : https://velosi-front.vercel.app
# Pour localhost (dev) : http://localhost:4200

FRONTEND_URL=https://velosi-front.vercel.app
ALLOWED_ORIGINS=https://velosi-front.vercel.app,http://localhost:4200

# ============================================
# INSTRUCTIONS DE DÉPLOIEMENT
# ============================================
# 
# 1. Déployer Keycloak sur Railway :
#    - Suivre : DEPLOIEMENT_KEYCLOAK_RAILWAY_MANUEL.md
#    - Copier l'URL générée → Remplacer les KEYCLOAK_URL ci-dessus
#    - Créer le Realm "ERP_Velosi" et Client "velosi_auth"
#    - Copier le Client Secret → Remplacer KEYCLOAK_CLIENT_SECRET
#    - Copier l'Admin Client Secret → Remplacer KEYCLOAK_ADMIN_CLIENT_SECRET
#
# 2. Déployer Backend sur Railway :
#    - Créer un nouveau service Railway
#    - Connecter le repo GitHub velosi-back
#    - Copier TOUTES les variables ci-dessus dans Railway Variables
#    - Railway déploiera automatiquement
#
# 3. Déployer Frontend sur Vercel :
#    - Connecter le repo velosi-front à Vercel
#    - Configurer les variables d'environnement frontend
#    - Copier l'URL générée → Remplacer FRONTEND_URL et ALLOWED_ORIGINS
#
# 4. Script de configuration automatique :
#    .\configure-backend-railway.ps1 `
#        -KeycloakUrl "https://keycloak-xxx.up.railway.app" `
#        -ClientSecret "votre-secret" `
#        -AdminClientSecret "votre-admin-secret" `
#        -FrontendUrl "https://votre-frontend.vercel.app"

