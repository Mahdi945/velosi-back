# ============================================
# CONFIGURATION PRODUCTION COMPLÈTE
# ============================================
# Ce fichier contient TOUTES les variables nécessaires pour la production
# ⚠️ NE JAMAIS COMMITTER CE FICHIER SUR GIT !

# ============================================
# BASE DE DONNÉES SUPABASE (PRODUCTION)
# ============================================
DB_VENDOR=postgres
DB_ADDR=aws-1-eu-north-1.pooler.supabase.com
DB_PORT=5432
DB_USER=postgres.aswqsbrpkofmhgqjmyuw
DB_PASSWORD=87Eq8384
DB_DATABASE=postgres

# ============================================
# JWT CONFIGURATION
# ============================================
JWT_SECRET=velosi-secret-key-2025-ultra-secure
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# KEYCLOAK LOCAL
# ============================================
# ⚠️ Keycloak tourne sur votre machine locale
# Le backend sur Railway accédera à votre Keycloak local via ngrok ou votre IP publique

# URL Keycloak Local (vous devrez exposer ceci via ngrok)
# Pour exposer Keycloak : ngrok http 8080
# Puis remplacez l'URL ci-dessous par celle de ngrok
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_SERVER_URL=http://localhost:8080
KEYCLOAK_AUTH_SERVER_URL=http://localhost:8080

# Configuration Realm et Client
KEYCLOAK_REALM=ERP_Velosi
KEYCLOAK_CLIENT_ID=velosi_auth
KEYCLOAK_CLIENT_SECRET=SqW52BNjvjyvmaJyUx2TwzgFTeqzeBzF

# Configuration Admin Keycloak (pour la synchronisation)
KEYCLOAK_ADMIN_CLIENT_ID=admin-cli
KEYCLOAK_ADMIN_CLIENT_SECRET=
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=87Eq8384

# ============================================
# ENVIRONMENT
# ============================================
NODE_ENV=production
PORT=3000

# ============================================
# FRONTEND (VERCEL)
# ============================================
# ⚠️ APRÈS DÉPLOIEMENT FRONTEND SUR VERCEL :
# Remplacez par l'URL générée par Vercel
# Exemple : https://velosi-erp.vercel.app

FRONTEND_URL=https://votre-frontend.vercel.app
ALLOWED_ORIGINS=https://votre-frontend.vercel.app,http://localhost:4200

# ============================================
# INSTRUCTIONS DE DÉPLOIEMENT
# ============================================
# 
# 1. Déployer Keycloak sur Railway :
#    - Suivre : DEPLOIEMENT_KEYCLOAK_RAILWAY_MANUEL.md
#    - Copier l'URL générée → Remplacer les KEYCLOAK_URL ci-dessus
#    - Créer le Realm "ERP_Velosi" et Client "velosi_auth"
#    - Copier le Client Secret → Remplacer KEYCLOAK_CLIENT_SECRET
#    - Copier l'Admin Client Secret → Remplacer KEYCLOAK_ADMIN_CLIENT_SECRET
#
# 2. Déployer Backend sur Railway :
#    - Créer un nouveau service Railway
#    - Connecter le repo GitHub velosi-back
#    - Copier TOUTES les variables ci-dessus dans Railway Variables
#    - Railway déploiera automatiquement
#
# 3. Déployer Frontend sur Vercel :
#    - Connecter le repo velosi-front à Vercel
#    - Configurer les variables d'environnement frontend
#    - Copier l'URL générée → Remplacer FRONTEND_URL et ALLOWED_ORIGINS
#
# 4. Script de configuration automatique :
#    .\configure-backend-railway.ps1 `
#        -KeycloakUrl "https://keycloak-xxx.up.railway.app" `
#        -ClientSecret "votre-secret" `
#        -AdminClientSecret "votre-admin-secret" `
#        -FrontendUrl "https://votre-frontend.vercel.app"

